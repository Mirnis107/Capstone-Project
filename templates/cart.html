<!doctype html>
<html>
<head>
  <title>Cart</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="nav">
  <a href="/">Home</a>
  <a href="/orders">My Orders</a>
  <a href="/logout">Logout</a>
</div>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <div class="flash">
      {% for msg in messages %}<p>{{ msg }}</p>{% endfor %}
    </div>
  {% endif %}
{% endwith %}

<h1>Your Cart</h1>

{% if items %}
  {% for it in items %}
    <div class="event">
      <h2>{{ it["name"] }}</h2>
      <p><strong>Price:</strong> ${{ "%.2f"|format(it["price"]) }}</p>
      <p><strong>Stock:</strong> {{ it["stock"] }}</p>

      <form method="POST" action="/cart/update/{{ it['cart_id'] }}">
        <label>Qty:</label>
        <input type="number" name="qty" min="1" value="{{ it['qty'] }}">
        <button type="submit">Update</button>
      </form>

      <form method="POST" action="/cart/remove/{{ it['cart_id'] }}">
        <button type="submit">Remove</button>
      </form>
    </div>
  {% endfor %}

  <h2>Total: ${{ "%.2f"|format(total) }}</h2>

  <form method="POST" action="/checkout">
    <button type="submit">Checkout</button>
  </form>
{% else %}
  <p>Your cart is empty.</p>
{% endif %}

</body>
</html>
